                    МІНІСТЕРСТВО ОСВІТИ І НАУКИ УКРАЇНИ
   ХАРКІВСЬКИЙ НАЦІОНАЛЬНИЙ УНІВЕРСИТЕТ РАДІОЕЛЕКТРОНІКИ



                           Кафедра Програмної інженерії




                                        Звіт
                              з лабораторної роботи №2
                    з дисципліни: «Скриптові мови програмування»
з теми: «Розробка консольного застосунку «Продовольчий магазин «Весна»» на
                                       PHP»




Виконала:                                                             Перевірив:
ст. гр. ПЗПІ-23-3                                  Старший викладач кафедри ПІ
Сидоров Д. О.                                                     Сокорчук І. П.




                                   Харків – 2025
ЗАВДАННЯ

Потрібно створити консольний застосунок «Продовольчий магазин "Весна"». Програма після запуску повинна вивести на термінал перелік можливих дій. Далі програма очікує введення значення з клавіатури. 
Щоб розпочати купувати товари, необхідно ввести число «1», після чого користувач повинен потрапити в режим закупівлі товарів. На екрані має з’явитися перелік продуктів. Щоб купити товар, необхідно ввести його номер. Після успішної перевірки на існування номера товару в списку, програма має попросити ввести кількість товару.
Якщо номер товару і його кількість (менше 100 шт.) були вказані коректно, то товар додається в кошик. Якщо вказано кількість «0», то товар видаляється з кошика. Далі знову відображається перелік товарів і пропонується купити наступний товар. Щоб завершити купувати товари і перейти до попереднього меню, необхідно ввести з клавіатури цифру «0».
Щоб отримати підсумковий рахунок, потрібно ввести число «2».
Щоб встановити свій профіль потрібно, ввести число «3», після чого програма попросить ввести ваше ім'я та ваш вік. Щоб завершити роботу та вийти з програми, потрібно ввести число «0». У програмі потрібно перевіряти інформацію, яку вводить користувач.

ХІД РОБОТИ

масив товарів, цей список товарів де кожен товар має номер, назву та ціну. Інші змінні, це масив для обраних товарів і їх кількості, змінна де буде зберігатися ім’я клієнта, та його вік

 3 $items = [
  4     1 => ["title" => "Молоко пастеризоване", "cost" => 12],
  5     2 => ["title" => "Хліб чорний             ", "cost" => 9],
  6     3 => ["title" => "Сир білий              ", "cost" => 21],
  7     4 => ["title" => "Сметана 20%             ", "cost" => 25],
  8     5 => ["title" => "Кефір 1%                ", "cost" => 19],
  9     6 => ["title" => "Вода газована           ", "cost" => 18],
 10     7 => ["title" => "Печиво \"Весна\"          ", "cost" => 14],
 11 ];
 12 
 13 $basket = [];
 14 $clientName = "";
 15 $clientAge = 0;

функція displaymenu, в ній користувач може вводити свій вибір та взаємодіяти із програмою. Програма буде виконувати дію користувача. 
17 function displayMenu() {
 18     echo "\n==============================\n";
 19     echo "= ЛАСКАВО ПРОСИМО ДО МАГАЗИНУ =\n";
 20     echo "=========== ВЕСНА ============\n";
 21     echo "1. Переглянути товари\n";
 22     echo "2. Перевірити кошик\n";
 23     echo "3. Змінити інформацію про клієнта\n";
 24     echo "0. Завершити роботу\n";
 25     echo "Оберіть опцію: ";
 26 }

Функція displayItems, завдяки їй виводить список всіх товарів та їх ціни
 28 function displayItems($items) {
 29     echo "№   НАЗВА                      ЦІНА\n";
 30     foreach ($items as $key => $val) {
 31         printf("%-2d %-24s %5d\n", $key, $val["title"], $val["cost"]);
 32     }
 33     echo "    ------------------------------\n";
 34     echo "0   ПОВЕРНЕННЯ ДО МЕНЮ\n";
 35     echo "Оберіть товар: ";
 36 }

Функція showBasket, показує які товари є в кошику.
 38 function showBasket($basket) {
 39     if (count($basket) === 0) {
 40         echo "ВАШ КОШИК ПОРОЖНІЙ\n";
 41         return;
 42     }
 43     echo "КОРЗИНА:\nНАЗВА                      КІЛЬКІСТЬ\n";
 44     foreach ($basket as $name => $amount) {
 45         printf("%-24s %5d\n", $name, $amount);
 46     }
 47 }

Функція InputLine, вона читає виведений рядок користувачем.
49 function inputLine() {
50     return trim(fgets(STDIN));
51 }

В першому кейсі йде цикл який дозволяє додавати декілька товарів підряд, поки користувач не натисне 0. Функція показує список товарів, користувач вводить номер, 	якщо користувач введе 0, тоді програма вийде з цього циклу. Далі йдеться перевірка чи існує такий товар під номером який ввів користувач. Якщо є, витягується назва товару, користувач може ввести кількість та товар додається до кошика. Якщо кількість дорівнює 0, товар не додається та видаляється з кошика.
 57     switch ($input) {
 58         case "1":
 59             while (true) {
 60                 displayItems($items);
 61                 $sel = inputLine();
 62                 if ($sel === "0") break;
 63 
 64                 if (!isset($items[$sel])) {
 65                     echo "ПОМИЛКА: Невірний номер товару.\n";
 66                     continue;
 67                 }
 68 
 69                 $chosenName = $items[$sel]["title"];
 70                 echo "Обрано: {$chosenName}\n";
 71                 echo "Введіть кількість (шт.): ";
 72                 $amount = inputLine();
 73 
 74                 if (!is_numeric($amount) || $amount < 0) {
 75                     echo "ПОМИЛКА: Кількість має бути числом >= 0.\n";
 76                     continue;
 77                 }
 78 
 79                 if ($amount == 0) {
 80                     echo "Товар видалено з кошика.\n";
 81                     unset($basket[$chosenName]);
 82                 } else {
 83                     $basket[$chosenName] = $amount;
 84                 }
 85 
 86                 showBasket($basket);
 87             }
 88             break;

У другому кейсі йде перевірка кошика, якщо кошик порожній, виведеться повідомлення, якщо ні, буде надано інформацію про продукти у кошику користувачу. За допомогою foreach, до кожного товару шукається його ціна та обчислюється загальна сумма
 90         case "2":
 91             if (empty($basket)) {
 92                 echo "Кошик наразі порожній.\n";
 93                 break;
 94             }
 95 
 96             echo "№   НАЗВА                      ЦІНА    КІЛЬК.  СУМА\n";
 97             echo "--------------------------------------------------\n";
 98             $idx = 1;
 99             $grandTotal = 0;
100             foreach ($basket as $title => $qty) {
101                 $unitCost = 0;
102                 foreach ($items as $entry) {
103                     if ($entry["title"] == $title) {
104                         $unitCost = $entry["cost"];
105                         break;
106                     }
107                 }
108                 $subTotal = $unitCost * $qty;
109                 printf("%-2d %-24s %6d %6d %8d\n", $idx++, $title, $unitCost, $qty, $subTotal);
110                 $grandTotal += $subTotal;
111             }
112             echo "--------------------------------------------------\n";
113             echo "ЗАГАЛОМ ДО СПЛАТИ: {$grandTotal}\n";
114             break;

У третьому кейсі йдеться про редагування профілю, Цикл запитує ім’я і буде просити допоки користувач не введе ім’я. Після цього програма запитує вік користувача, який повинен бути в проміжку від 7 до 150. Після цього йде підствердження профілю та виведення інформації на екран.

116         case "3":
117             do {
118                 echo "Введіть ваше ім'я: ";
119                 $clientName = inputLine();
120             } while (!preg_match('/[a-zA-Zа-яА-ЯіІїЇєЄ]/u', $clientName));
121 
122             do {
123                 echo "Вкажіть ваш вік: ";
124                 $clientAge = inputLine();
125             } while (!is_numeric($clientAge) || $clientAge < 7 || $clientAge > 150);
126 
127             echo "Профіль було оновлено: {$clientName}, вік {$clientAge}\n";
128             break;

Кейс 0 це вихід з програми. 
130         case "0":
131             echo "Дякуємо за візит до \"Весна\"! Гарного дня!\n";
132             exit;

ВИСНОВКИ
У ході виконання роботи було створено консольну програму мовою PHP, яка моделює роботу невеликого магазину. Реалізовано вибір товарів, редагування кошика, формування рахунку та налаштування профілю користувача.

Відеозвіт: https://youtu.be/axm8qrHEPGY

ДОДАТОК А
Програмний код

1 <?php
  2 
  3 $items = [
  4     1 => ["title" => "Молоко пастеризоване", "cost" => 12],
  5     2 => ["title" => "Хліб чорний             ", "cost" => 9],
  6     3 => ["title" => "Сир білий              ", "cost" => 21],
  7     4 => ["title" => "Сметана 20%             ", "cost" => 25],
  8     5 => ["title" => "Кефір 1%                ", "cost" => 19],
  9     6 => ["title" => "Вода газована           ", "cost" => 18],
 10     7 => ["title" => "Печиво \"Весна\"          ", "cost" => 14],
 11 ];
 12 
 13 $basket = [];
 14 $clientName = "";
 15 $clientAge = 0;
 16 
 17 function displayMenu() {
 18     echo "\n==============================\n";
 19     echo "= ЛАСКАВО ПРОСИМО ДО МАГАЗИНУ =\n";
 20     echo "=========== ВЕСНА ============\n";
 21     echo "1. Переглянути товари\n";
 22     echo "2. Перевірити кошик\n";
 23     echo "3. Змінити інформацію про клієнта\n";
 24     echo "0. Завершити роботу\n";
 25     echo "Оберіть опцію: ";
 26 }
 27 
 28 function displayItems($items) {
 29     echo "№   НАЗВА                      ЦІНА\n";
 30     foreach ($items as $key => $val) {
 31         printf("%-2d %-24s %5d\n", $key, $val["title"], $val["cost"]);
 32     }
 33     echo "    ------------------------------\n";
 34     echo "0   ПОВЕРНЕННЯ ДО МЕНЮ\n";
 35     echo "Оберіть товар: ";
 36 }
 37 
 38 function showBasket($basket) {
 39     if (count($basket) === 0) {
 40         echo "ВАШ КОШИК ПОРОЖНІЙ\n";
 41         return;
 42     }
 43     echo "КОРЗИНА:\nНАЗВА                      КІЛЬКІСТЬ\n";
 44     foreach ($basket as $name => $amount) {
 45         printf("%-24s %5d\n", $name, $amount);
 46     }
 47 }
 48 
 49 function inputLine() {
 50     return trim(fgets(STDIN));
 51 }
 52 
 53 while (true) {
 54     displayMenu();
 55     $input = inputLine();
 56 
 57     switch ($input) {
 58         case "1":
 59             while (true) {
 60                 displayItems($items);
 61                 $sel = inputLine();
 62                 if ($sel === "0") break;
 63 
 64                 if (!isset($items[$sel])) {
 65                     echo "ПОМИЛКА: Невірний номер товару.\n";
 66                     continue;
 67                 }
 68 
 69                 $chosenName = $items[$sel]["title"];
 70                 echo "Обрано: {$chosenName}\n";
 71                 echo "Введіть кількість (шт.): ";
 72                 $amount = inputLine();
 73 
 74                 if (!is_numeric($amount) || $amount < 0) {
 75                     echo "ПОМИЛКА: Кількість має бути числом >= 0.\n";
 76                     continue;
 77                 }
 78 
 79                 if ($amount == 0) {
 80                     echo "Товар видалено з кошика.\n";
 81                     unset($basket[$chosenName]);
 82                 } else {
 83                     $basket[$chosenName] = $amount;
 84                 }
 85 
 86                 showBasket($basket);
 87             }
 88             break;
 89 
 90         case "2":
 91             if (empty($basket)) {
 92                 echo "Кошик наразі порожній.\n";
 93                 break;
 94             }
 95 
 96             echo "№   НАЗВА                      ЦІНА    КІЛЬК.  СУМА\n";
 97             echo "--------------------------------------------------\n";
 98             $idx = 1;
 99             $grandTotal = 0;
100             foreach ($basket as $title => $qty) {
101                 $unitCost = 0;
102                 foreach ($items as $entry) {
103                     if ($entry["title"] == $title) {
104                         $unitCost = $entry["cost"];
105                         break;
106                     }
107                 }
108                 $subTotal = $unitCost * $qty;
109                 printf("%-2d %-24s %6d %6d %8d\n", $idx++, $title, $unitCost, $qty, $subTotal);
110                 $grandTotal += $subTotal;
111             }
112             echo "--------------------------------------------------\n";
113             echo "ЗАГАЛОМ ДО СПЛАТИ: {$grandTotal}\n";
114             break;
115 
116         case "3":
117             do {
118                 echo "Введіть ваше ім'я: ";
119                 $clientName = inputLine();
120             } while (!preg_match('/[a-zA-Zа-яА-ЯіІїЇєЄ]/u', $clientName));
121 
122             do {
123                 echo "Вкажіть ваш вік: ";
124                 $clientAge = inputLine();
125             } while (!is_numeric($clientAge) || $clientAge < 7 || $clientAge > 150);
126 
127             echo "Профіль було оновлено: {$clientName}, вік {$clientAge}\n";
128             break;
129 
130         case "0":
131             echo "Дякуємо за візит до \"Весна\"! Гарного дня!\n";
132             exit;
133 
134         default:
135             echo "ПОМИЛКА: Оберіть коректну опцію з меню.\n";
136             break;
137     }
138 }
